---
import { getCollection } from 'astro:content';

// è·å–æ–‡ç« é›†åˆ
const posts = await getCollection('posts'); // ç¡®ä¿ä½ çš„æ–‡ç« é›†åˆåæ˜¯ posts

// ç»Ÿè®¡æ–‡ç« æ•°
const postCount = posts.length;

// ç»Ÿè®¡æ ‡ç­¾å’Œåˆ†ç±»
const tags = new Set();
const categories = new Set();
let totalWords = 0;

posts.forEach(post => {
  if (post.data.tags) post.data.tags.forEach(tag => tags.add(tag));
  if (post.data.category) categories.add(post.data.category);
  if (post.body) totalWords += post.body.split(/\s+/).length;
});

const totalWordsInWan = (totalWords / 10000).toFixed(1);
---

<div class="blog-stats">
  <h3>ğŸ“Š Blog Stats</h3>
  <ul>
    <li>ğŸ“ Articles: {postCount}</li>
    <li>ğŸ· Tags: {tags.size}</li>
    <li>ğŸ“‚ Categories: {categories.size}</li>
    <li>âœï¸ Total Words: {totalWordsInWan}ä¸‡</li>
  </ul>
</div>

<style>
.blog-stats {
  margin-top: 1rem;
  padding: 1rem;
  background-color: rgba(0,0,0,0.05);
  border-radius: 8px;
}
.blog-stats h3 {
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}
.blog-stats ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.blog-stats li {
  margin: 0.3rem 0;
  font-size: 0.95rem;
}
</style>